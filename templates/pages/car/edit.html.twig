{% extends "base.html.twig" %}
{% block title %}Modification de la voiture : {{car.marque}} {{car.modele}}{% endblock %}
{% block stylesheets %}
{{ parent() }}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.1.4/dist/css/datepicker-bs4.min.css">
{% endblock %}

{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block body %}

<div class="container edit">
{% for message in app.flashes('success') %}
<div class="alert alert-success mt-2">
    {{ message }}
</div>
{% endfor %}
    <h1 class="text-center m-3">Modification de la voiture : <span>{{car.marque}} {{car.modele}}</span></h1>
    {{form_start(form)}}

 <div class="row  mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.marque) }}
            {{ form_widget(form.marque) }}
            {{ form_errors(form.marque) }}
        </div>
        <div class="form-groupe col-6">
            {{ form_label(form.modele) }}
            {{ form_widget(form.modele) }}
            {{ form_errors(form.modele) }}
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.prix) }}
            {{ form_widget(form.prix) }}
            {{ form_errors(form.prix) }}
        </div>
        <div class="form-groupe col-6">
            {{ form_label(form.nbrpoprio) }}
            {{ form_widget(form.nbrpoprio) }}
            {{ form_errors(form.nbrpoprio) }}
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.kilometres) }}
            {{ form_widget(form.kilometres) }}
             {{ form_errors(form.kilometres) }}
        </div>
        <div class="form-groupe col-6">
            {{ form_label(form.carburant) }}
            {{ form_widget(form.carburant) }}
             {{ form_errors(form.carburant) }}
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.transmition) }}
            {{ form_widget(form.transmition) }}
             {{ form_errors(form.transmition) }}
        </div>


        <div class="form-groupe col-6">
            {{ form_label(form.cylindree) }}
            {{ form_widget(form.cylindree) }}
             {{ form_errors(form.cylindree) }}
        </div>
    </div>

    <div class="row mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.puissance) }}
            {{ form_widget(form.puissance) }}
             {{ form_errors(form.puissance) }}
        </div>
        <div class="form-groupe col-6">
            {{ form_label(form.miseEnCirculation) }}
            {{ form_widget(form.miseEnCirculation) }}
             {{ form_errors(form.miseEnCirculation) }}
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-6">
            {{ form_label(form.description) }}
            {{ form_widget(form.description) }}
             {{ form_errors(form.description) }}
        </div>
        <div class="form-groupe col-6">
            {{ form_label(form.optioncar) }}
            {{ form_widget(form.optioncar) }}
             {{ form_errors(form.optioncar) }}
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-12">
            {{ form_label(form.coverImage) }}
            {{ form_widget(form.coverImage) }}
            {{ form_errors(form.coverImage) }}
         
            <div class="formImage">
                {% if car.coverImage != "https://api.lorem.space/image/car?w=1920&h=1080" %}
                <img src="/uploads/{{car.coverImage}}" class="starsimg">
                {% else %}
                <img src="{{car.coverImage}}" class="starsimg">
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row  mt-3">
        <div class="form-groupe col-12">
            {{ form_label(form.images) }}
            {{ form_widget(form.images) }}   
            {{ form_errors(form.images) }}
            <div class="gallerieImg">
                {% for image in car.images %}
                <div class="blockImage">
                {% if image.url != "https://api.lorem.space/image/car?w=1920&h=1080" %}
                <img src="{{ asset('/uploads/'~image.url) }}" alt="image de {{car.marque}}" class="d-block">
                {% else %}
                <img src="{{image.url}}" class="d-block" alt="image de {{car.marque}}">
                {% endif %}
                <div class="link ">
                <a href="{{path('image_delete',{'id': image.id})}}" class="text-center">Supprimer</a>
                </div>
                
                </div>
                {% endfor %}
                
                
                
            </div>
        </div>
    </div>
    <div class="row">
    <div class="col-12 text-center">
     <button type="submit" class="btn btn-primary mt-3 ">Modifier voiture</button>
    {{form_end(form)}}
    </div>
    </div>
   
</div>


</div>

{% endblock %}

{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.1.4/dist/js/datepicker.min.js"></script>
<script>
    const miseEnCirculation = document.querySelector('#car_miseEnCirculation')

    const datePicker = new Datepicker(miseEnCirculation, {
        format: 'dd/mm/yyyy',
        maxDate: new Date()
    })
</script>{% endblock %}